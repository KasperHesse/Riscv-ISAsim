package test;

import static org.junit.Assert.*;
import org.junit.Test;

import app.*;

public class BranchTesters {

	/**
	 * Tests whether the "branchcnt" tester works appropriately
	 */
	@Test
	public void testBranchCnt() throws Exception {
		RiscV rv = new RiscV("asm/branchcnt");
		rv.setDebugMode(true);
		rv.run();
		int[] Reg = rv.getReg();
		int[] expected = {
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0xa, 0xa,
			0xa, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0
		};
		assertArrayEquals(expected, Reg);
	}

	/**
	 * Tests whether the "branchmany" tester works appropriately
	 */
	@Test
	public void testBranchMany() throws Exception {
		RiscV rv = new RiscV("asm/branchmany");
		rv.setDebugMode(true);
		rv.run();
		int[] Reg = rv.getReg();
		int[] expected = {
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0xa, 0x4,
			0x3, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0
		};
		assertArrayEquals(expected, Reg);
	}

	/**
	 * Tests whether the "branches" tester works appropriately
	 */
	@Test
	public void testBranches() throws Exception {
		RiscV rv = new RiscV("asm/branches");
		rv.setDebugMode(true);
		rv.run();
		int[] Reg = rv.getReg();
		int[] expected = {
			0x0, 0x0, 0x0, 0x1,
			0x2, 0xffffffff, 0x0, 0x0,
			0x0, 0x1, 0xa, 0x1,
			0x1, 0x1, 0x1, 0x1,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0,
			0x0, 0x0, 0x0, 0x0
		};
		assertArrayEquals(expected, Reg);
	}
}
